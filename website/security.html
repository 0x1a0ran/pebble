<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Pebble</title>
    <link rel="stylesheet" href="screen.css" type="text/css" media="screen" />
  </head>

  <body>

    <div id="container">

      <div id="header">
        <div id="blogName"><span>Pebble</span></div>
        <div id="blogDescription"><span>A lightweight, open source, Java EE blogging tool</span></div>
      </div>

      <div id="linearNavigationLinks">
        <a href="http://sourceforge.net/projects/pebble/">SourceForge.net project page</a> |
        <a href="index.html">Home</a> |
        <a href="http://lists.sourceforge.net/mailman/listinfo/pebble-user/">pebble-user mailing list</a>
      </div>

      <div id="sidebar">
      </div>

      <div id="content">

        <div class="contentItem published">
          <h1>Security</h1>
          <h2>How do I customise the security?</h2>

          <div class="contentItemBody">
            <p>
              Pebble uses the Acegi Security Framework for Spring, which is a very flexible security implementation
              that provides a way to configure almost every aspect of the security infrastructure.
            </p>

            <h3>Adding new users</h3>
            <p>
              User information is stored underneath the Pebble data directory, in a sub-directory called <code>realm</code>. In here there is
              one file per user, with the filename convention of <code>{username}.properties</code>. Each file contains a series of name=value
              pairs that correspond to the information stored about each user. An example file (the default <code>username.properties</code>)
              is as follows.
            </p>

            <pre class="codeSample">name=Default User
password=1d26806da123dd76cdc52fc3daa9ad6777522935
roles=ROLE_BLOG_OWNER,ROLE_BLOG_PUBLISHER,ROLE_BLOG_CONTRIBUTOR,ROLE_PEBBLE_ADMIN
website=http://www.domain.com
emailAddress=username@domain.com</pre>

            <p>
              To add more users, create an additional file for each user and customize the contents as necessary. Possible roles
              include the following.
            </p>
            <ul>
              <li>ROLE_PEBBLE_ADMIN : can administer the Pebble application.</li>
              <li>ROLE_BLOG_OWNER : can configure and customize how the blog works, looks, etc.</li>
              <li>ROLE_BLOG_PUBLISHER : can publish/unpublish blog entries.</li>
              <li>ROLE_BLOG_CONTRIBUTOR : can contribute blog entries and static pages, manage comments, etc.</li>
            </ul>

            <p>
              Pebble uses the Acegi Security System for Spring and has been cofigured to use an SHA encoded password with the username used as the salt, although this is configurable.
              A short shell script has been included in the <code>bin</code> directory to help you encode your own passwords. To use it, open the file and modify the value of <code>PEBBLE_HOME</code> to point to an unexploded copy of the <code>pebble.war</code> file. The usage of the file is as follows.
            </p>

            <pre class="codeSample">encode-password.sh [md5|sha] username password</pre>

            <p>
              For example, the password above can be generated by the following command.
            </p>

            <pre class="codeSample">encode-password.sh sha username password</pre>

            <h3>Using another realm</h3>
            <p>
              Pebble is distributed with a bespoke security realm implementation that stores user information
              in the filing system, next to the blog data. It is, however, possible to change this and configure
              Pebble to use another realm implementation, such as one that stores user information in a relational
              database or LDAP.
            </p>

            <p>
              [Further details to appear in final 2.0.0 release.]
            </p>
          </div>
        </div>

      </div>

      <div id="footer">
        Pebble is written and maintained by <a href="http://www.simongbrown.com/blog/">Simon Brown</a>
      </div>

    </div>
  </body>
</html>
